<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Rocket Game</title>
<style>
    body {
        margin: 0;
        overflow: hidden;
        background: black;
    }
    canvas {
        display: block;
        margin: 0 auto;
    }
</style>
<script src="https://cdn.jsdelivr.net/npm/phaser@3/dist/phaser.js"></script>
</head>
<body>

<script>
class MainScene extends Phaser.Scene {
    constructor() {
        super('MainScene');
    }

    preload() {
        this.load.image('bg', 'assets/bg-earth.png');
        this.load.image('coin', 'assets/coin.png');
        this.load.image('rocket', 'assets/rocket.gif');
        this.load.image('obstacle', 'assets/obstacle.gif');
    }

    create() {
        this.bg = this.add.tileSprite(0, 0, this.scale.width, this.scale.height, 'bg')
            .setOrigin(0, 0);

        this.rocket = this.physics.add.sprite(100, this.scale.height / 2, 'rocket');
        this.rocket.setCollideWorldBounds(true);

        this.cursors = this.input.keyboard.createCursorKeys();

        this.coins = this.physics.add.group();
        this.obstacles = this.physics.add.group();

        this.score = 0;
        this.scoreText = this.add.text(10, 10, 'Оноо: 0', { fontSize: '24px', fill: '#fff' });

        this.physics.add.overlap(this.rocket, this.coins, this.collectCoin, null, this);
        this.physics.add.collider(this.rocket, this.obstacles, this.hitObstacle, null, this);

        this.time.addEvent({ delay: 1500, callback: this.spawnCoin, callbackScope: this, loop: true });
        this.time.addEvent({ delay: 2000, callback: this.spawnObstacle, callbackScope: this, loop: true });
    }

    update() {
        this.bg.tilePositionY -= 2;

        if (this.cursors.up.isDown) {
            this.rocket.setVelocityY(-200);
        } else if (this.cursors.down.isDown) {
            this.rocket.setVelocityY(200);
        } else {
            this.rocket.setVelocityY(0);
        }
    }

    spawnCoin() {
        let x = Phaser.Math.Between(200, this.scale.width - 50);
        let coin = this.coins.create(x, 0, 'coin');
        coin.setVelocityY(150);
    }

    spawnObstacle() {
        let x = Phaser.Math.Between(200, this.scale.width - 50);
        let obstacle = this.obstacles.create(x, 0, 'obstacle');
        obstacle.setVelocityY(200);
    }

    collectCoin(rocket, coin) {
        coin.destroy();
        this.score += 10;
        this.scoreText.setText('Оноо: ' + this.score);
    }

    hitObstacle() {
        this.scene.restart(); // Текст үзүүлэхгүй шууд тоглоомыг дахин эхлүүлнэ
    }
}

const config = {
    type: Phaser.AUTO,
    width: 480,
    height: 800,
    physics: {
        default: 'arcade',
        arcade: { debug: false }
    },
    scene: [MainScene]
};

new Phaser.Game(config);
</script>

</body>
</html>